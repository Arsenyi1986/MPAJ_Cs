import re  # библиотека регулярных выражений

print("Здравствуйте! Вас приветствует игра \"Очень умный\". \n"
      "Вам будет необходимо вписывать в ячейку предложенный вариант ответа. \n"
      "Если вы захотите выйти из игры впишите : \"Стоп\"")


def evaluation(difficulty, points):  # эта функция проводит оценку по завершению того или иного этапа викторины
    # в данном слваре описаны звания, описания, и баллы для завершения всех уровней сложности
    # как можно заметить - словарь заполняется разными данными, исходя из уровня сложности
    if difficulty == 0:
        explanation = {"name": "Сегодня вы \"Обломов!\"",
                       "discrip": "Ваши баллы позволяют считать Вас Ильей Обломовым."
                                  "Это помещик, дворянин, живущий в Петербурге."
                                  "Ведёт ленивый образ жизни, ничем не занимаясь,"
                                  "кроме размышлений и мечтаний в постели и поедания жирной пищи.",
                       "rek_point": 1}
    elif difficulty == 1:
        explanation = {"name": "Сегодня вы \"Джеймс Хиткоут!\"",
                       "discrip": "Ваш герой- Британский врач,"
                                  " получивший Шнобелевскую премию за \"открытие\" необычно крупных"
                                  "размеров ушей у пожилых людей.",
                       "rek_point": 2.5}
    else:
        explanation = {"name": "Сегодня вы \"Тернес Тао!\"",
                       "discrip": "Бесспорно Вы олицетворяете Тереса Тао. Это австралийский математик,"
                                  "обладатель самого высокого IQ(230 баллов). Его также называют «Моцартом математики»",
                       "rek_point": 5}

    # переменная temp используется временно для определения правильности ответа пользователя
    temp = input(name + "! Вы набрали " + str(points) + " очков! Хотите узнать ваше звание? (Да/Нет)")
    while True:
        if not re.match("[Н,н]ет", str(temp)) and not re.match("[Д,д]а", str(temp)):
            print("Не совсем понял. Можно ещё раз?")
        else:
            if re.match("[Н,н]ет", str(temp)):
                print("Конец игры!")
                break
            else:
                # данный цикл подходит для конца любого уровня сложности так как обращается к вышеописанному списку
                # используя колличество баллов, передаваемых функции
                # и параметр сложности, заранее определяемый в каждом цикле викторины
                if points >= explanation["rek_point"]:
                    print(explanation["name"])
                    print("Если вы хотите узнать расшифровку, введите \"Хочу\".\n"
                          "Для возвращения к выбору уровня сложности введите \"Стоп\"")
                    while True:
                        exp = input()
                        # зачастую в данной ситуации было бы уместно использовать конструкцию try...except,
                        # однако исходя из малого колличества доступных вариантов выбора - утверждение if
                        # отлично справилось с задачей
                        if not re.match("[Х,х]очу", str(exp)) and not re.match("[С,с]топ", str(exp)):
                            print("Не совсем понял. Можно ещё раз?")
                        else:
                            if re.match("[С,с]топ", str(exp)):
                                break
                            else:
                                print(explanation["discrip"])
                                break
                    print("Игра закончена! Благодарим за участие! Может попробуете другие уровни?")
                    print()
                    break
                else:
                    print("Увы, звания вы не получили! Недостаточно баллов. Игра окончена.")
                    print()
                    break


def checkname():  # функция для проверки правильности ввода никнейма
    print("Введите ваш ник. (Необходимо, чтобы он состоял НЕ МЕНЕЕ, чем из 6 символов.): ")
    while True:
        chname = input()
        if re.match("......+", str(chname)):  # здесь используется регулярное выражение для определения длины никнейма
            print("Зафиксирован подходящий ник: " + str(chname))
            return chname
        else:
            print("Ошибка! В никнейме менее 6 символов")
            print("Введите ник: ")
    # никнейм может быть любым - самое главное чтобы он не был короче 6 символов


def teapotlvl():  # в этой функции содержатся вопросы и цикл для лёгкого уровня сложности
    points = 0  # переменная для подсчёта баллов
    difficulty = 0  # объявление уровня сложности

    query = (["Как называется еврейский Новый год?",
              "Ханука",
              "Йом-Кипур",
              "Кванза",
              "Рон-Ашана",
              "Рон-Ашана",
              "Название похоже на название популярного франзузского гипермаркета"],
             ["Какая планета самая горячая?",
              "Венера",
              "Сатурн",
              "Меркурий",
              "Марс",
              "Меркурий",
              "Эта планета находится так близко к Солнцу, температура его поверхности может достигать 450 градусов!"],
             ["Какой герой мультфильма живет в ананасе под водой?",
              "Камбала",
              "Немо",
              "Рик и Морти",
              "Губка Боб Квадратные Штаны",
              "Губка Боб Квадратные Штаны",
              "У него есть домашний питомец - улитка."],
             ["Арахнофобия – это страх чего?",
              "Жуков",
              "Червяков",
              "Тараканов",
              "Пауков",
              "Пауков",
              "Есть древнегреческий миф про Арахну - девушку с паучьими ногами"],
             ["Сколько цветов в радуге?",
              "5",
              "6",
              "7",
              "8",
              "7",
              "Каждый охотник желает знать где сидит фазан."])

    print("Вам будет задано пять вопросов. В качестве ответа принимается полное содержание ответа.\n"
          "(Прим: Как зовут красного маппета с высоким голосом? a)Элмо б)Кермит в) Большая птица (Ответ: Элмо))\n"
          "Для каждого вопроса есть подсказка. Чтобы получить подсказку, напишите слово \"Хинт\"\n"
          "Также вы в любой момент можете вернуться в главное меню, написав \"Стоп\"")

    # цикл for используется для вывода вопросов и вариантов ответа
    for i in range(5):
        print(query[i][0])
        print("а)" + query[i][1])
        print("б)" + query[i][2])
        print("в)" + query[i][3])
        print("г)" + query[i][4])
        while True:
            answ = input()
            if re.match("[С,с]топ", str(answ)):
                break
            if answ == query[i][5]:  # правильный ответ всегда находится на пятой позиции списка
                print("Совершенно верно!")
                points += 1
                break
            elif answ == "Хинт":
                print(query[i][6])  # подсказка всегда находится на шестой позиции списка
            elif answ != query[i][1] and answ != query[i][2] and answ != query[i][3] and answ != query[i][4]:
                # несовпадение с любым из доступных вариантов ответа приведёт к повторной задаче вопроса
                # таким образом пользователь может дать только правильный или неправильный ответ
                print("Такого варианта нет. Попробуйте ещё раз.")
            else:
                print("Неверно!")
                break
        if re.match("[С,с]топ", str(answ)):
            break
    evaluation(difficulty, points)


def midlvl():  # в этой функции содержатся вопросы и цикл для среднего уровня сложности
    points = 0  # переменная для учета баллов
    difficulty = 1  # объявление уровня сложности
    print("В данном цикле у вас есть выбор из двух тем (в каждой из них по 5 вопросов).\n"
          "В качестве ответа принимается полное содержание ответа.\n"
          "(Прим: Как зовут красного маппета с высоким голосом? a)Элмо б)Кермит в) Большая птица (Ответ: Элмо))\n"
          "Для каждого вопроса есть подсказка. Чтобы получить подсказку, напишите слово \"Хинт\"\n"
          "Также вы в любой момент можете вернуться в главное меню, написав \"Стоп\"")
    while True:
        print("Итак, выбор темы!\n"
              "Правда или ложь / IQ-вопросы (ПиЛ / Мозг)")
        temp = input()
        if temp != "ПиЛ" and temp != "Мозг":
            print("Такой темы нет. Попробуйте ещё раз.")
            continue                                        # данный цикл делится на две ветки, так как в среднем
        else:                                               # уровне сложности есть две темы
            if temp == "ПиЛ":
                query = (["На Южном полюсе холоднее, чем на Северном. (Правда/Ложь)",
                          "Правда",
                          "Ответ довольно контринтуитивный"],
                         ["Правое полушарие мозга часто называют \"творческим\" (Правда/Ложь)",
                          "Правда",
                          "<Hint_PlaceHolder>"],
                         ["Ватикан — это страна",
                          "Правда",
                          "<Hint_PlaceHolder>"],
                         ["Череп – самая крепкая кость в человеческом теле",
                          "Ложь",
                          "<Hint_PlaceHolder>"],
                         ["Все млекопитающие живут на суше.",
                          "Ложь",
                          "А дельфин это рыба?"])
                for i in range(5):
                    print(query[i][0])
                    while True:
                        answ = input()
                        if re.match("[С,с]топ", str(answ)):
                            break
                        if answ == query[i][1]:
                            print("Совершенно верно!")                        # для каждого уровня сложности реализован
                            points += 1                                       # отдельный цикл вопросов, так как вопросы
                            break                                             # не соответсвуют единой структуре
                        elif answ == "Хинт":
                            print(query[i][2])
                        elif answ != "Ложь" and answ != "Правда":
                            print("Такого варианта нет. Попробуйте ещё раз.")
                        else:
                            if i != 4:
                                print("Неверно! Может следующий вопрос?")
                                break
                            else:
                                print("Неверно!")
                    if re.match("[С,с]топ", str(answ)):
                        break
            else:                # эта строчка - разделитель между двумя темами викторины среднего уровня
                query = (["Каким числом следует заменить знак вопроса?",
                          "<25 29 33 37 41 ?>",
                          "45",
                          "Попробуй узнать разность соседних чисел."],
                         ["Выберите лишнее слово.",
                          "селедка кит акула барракуда треска",
                          "кит",
                          "Найдите среди них млекопитающее."],
                         ["Какой буквой следует заменить знак вопроса?",
                          "Б Г Е Ж И ?",
                          "К",
                          "Здесь заложена последовательность: +2 к каждой последующей букве"],
                         ["Сколько зеленых автомобилей в день производится, если производится 1000 кузовов для "
                          "белых, зеленых, черных и красных автомобилей в пропорции 4:8:7:1 соответственно",
                          "а)320 б)340 в)380 г)365 д)350",
                          "350",
                          "Попробуйте найти сумму пропорций . Затем разделите на общее число автомобилей"])

                for i in range(4):
                    print(query[i][0])
                    print(query[i][1])
                    while True:
                        answ = input()
                        if re.match("[С,с]топ", str(answ)):
                            break                                              # вводы для всех вопросов данной темы
                        if answ == "Хинт":
                            print(query[i][3])
                        elif answ != query[i][2]:
                            if (i == 0 and not re.match("[0-9][0-9]", answ)) or\
                                    (i == 1 and (answ != "селедка" and answ != "акула" and
                                                 answ != "барракуда" and answ != "треска")) or \
                                    (i == 2 and not re.match("[А-Я]", answ)) or\
                                    (i == 3 and (answ != "320" and answ != "340" and answ != "365" and answ != "380")):
                                print("Наверное вы ввели что-то неверно. Попробуйте ещё раз.")
                            else:
                                print("Неверно!")
                                break
                        else:
                            print("Верно!")
                            points += 1
                            break
                    if re.match("[С,с]топ", str(answ)):
                        break
                print("Какие два слова наиболее противоположны по смыслу?\n"
                      "(В качестве ответа введите два слова через запятую и пробел)\n"
                      "(!!!Аккуратнее - в данном вопросе не поддерживается ввод слов, не относящихся к заданию!!!)")
                print("1) ШИРОКИЙ 2) ПЛАЧЕВНЫЙ 3) СОЗЫВАТЬ 4) ХВАЛИТЬ \n"
                      "5) ПЕЧАЛЬНЫЙ 6) УНИЖАТЬ 7) ТРЕПЕТАТЬ 8) ТОЛСТЫЙ")
                while True:
                    answ = input()
                    if re.match("[С,с]топ", str(answ)):
                        break                                                    # даёт возможность дать полу-верный
                    if answ == "Хинт":                                           # ответ, потому он реализован вне цикла
                        print("<hint_placeholder>")
                    elif answ != "ХВАЛИТЬ, УНИЖАТЬ" or answ != "УНИЖАТЬ, ХВАЛИТЬ":
                        if re.search("ХВАЛИТЬ", answ) or re.search("УНИЖАТЬ", answ):
                            print("Верно только на половину! За это только пол балла.")
                            points += 0.5
                            break
                        else:
                            print("Совершенно неверно!")
                            break
                    else:
                        print("Верно!")
                        points += 1
                        break
                if re.match("[С,с]топ", str(answ)):
                    break
            evaluation(difficulty, points)
        break


def hardlvl():  # в этой функции содержатся вопросы и цикл для среднего уровня сложности
    points = 0  # переменная для учета баллов
    difficulty = 2  # объявление уровня сложности
    query = (["Кто автор поэмы \"Руслан и Людмила\"?",
              "Михаил Лермонтов",
              "Антон Чехов",
              "Александр Пушкин",
              "Иван Тургенев",
              "Александр Пушкин",
              "<hint_placeholder>"],
             ["Что из следующего нельзя представить римскими цифрами?",
              "0",
              "100",
              "1 миллион",
              "2",
              "0",
              "<hint_placeholder>"],
             ["Кто из героев Пушкина не участвовал в дуэли?",
              "Евгений Онегин",
              "Пётр Гринёв",
              "Владимир Дубровский",
              " ",
              "Владимир Дубровский",
              "<hint_placeholder>"],
             ["Как заканчивается высказывание Аристотеля: «Познание начинается с поиска...?",
              "спора",
              "удивления",
              "восхищения",
              " ",
              "удивления",
              "<hint_placeholder>"],
             ["В каком океане находятся Мальдивские острова?",
              "Тихий океан",
              "Атлантический океан",
              "Индийский океан",
              " ",
              "Индийский океан",
              "<hint_placeholder>"],
             ["Какой в Бразилии официальный язык?",
              "Бразильский",
              "Португальский",
              "Испанский",
              "Каталанский",
              "Португальский",
              "<hint_placeholder>"],
             ["Kaк нaзывaeтcя paзличный цвeт paдyжнoй oбoлoчки пpaвoгo и лeвoгo глaзa?",
              "Гемолакрия",
              "Гетерохромия",
              "Иридоэктомия",
              "Поликория",
              "Гетерохромия",
              "<hint_placeholder>"],
             ["Какая из этих стран находится южнее?",
              "Греция",
              "Болгария",
              "Румыния",
              "Сербия",
              "Греция",
              "<hint_placeholder>"],
             ["Что изучает наука этология?",
              "Поведение животных",
              "Развитие живых организмов",
              "Фольклор народов мира",
              " ",
              "Поведение животных",
              "<hint_placeholder>"],
             ["Известно, что грымзик обязательно или полосат, или рогат, или то и другое вместе.",
              "грымзик не может быть безрогим",
              "грымзик не может быть однотонным и безрогим одновременно",
              "грымзик не может быть полосатым и безрогим одновременно",
              " ",
              "<hint_placeholder>"])

    print("Вам будет задано десять вопросов. В качестве ответа принимается полное содержание ответа.\n"
          "(Прим: Как зовут красного маппета с высоким голосом? a)Элмо б)Кермит в) Большая птица (Ответ: Элмо))\n"
          "Для каждого вопроса есть подсказка. Чтобы получить подсказку, напишите слово \"Хинт\"\n"
          "Также вы в любой момент можете вернуться в главное меню, написав \"Стоп\"")

    for i in range(10):
        print(query[i][0])
        print("а)" + query[i][1])
        print("б)" + query[i][2])
        print("в)" + query[i][3])
        if query[i][4] != " ":
            print("г)" + query[i][4])
        while True:
            answ = input()
            if answ == "Стоп":
                break
            else:
                if answ == query[i][5]:
                    print("Совершенно верно!")
                    points += 1
                    break
                elif answ == "Хинт":
                    print(query[i][6])
                elif answ != query[i][1] and answ != query[i][2] and answ != query[i][3] and answ != query[i][4]:
                    print("Такого варианта нет. Попробуйте ещё раз.")
                else:
                    print("Неверно!")
                    break
        if answ == "Стоп":
            break
    evaluation(difficulty, points)


# основная часть кода
# здесь происходит выбор уровня сложности

name = checkname()
while True:
    print("Вам необходимо выбрать уровень игры.\n "
          "Введите один из предложенных вариантов: \n-Чайник \n-Средний \n-Хард \n"
          "Если хотите выйти - напишите \"Стоп\"")
    choice = input()
    if re.match("[С,с]топ", str(choice)):
        break
    elif re.match("[Ч,ч]айник", str(choice)):
        teapotlvl()
    elif re.match("[С,с]редний", str(choice)):
        midlvl()
    elif re.match("[Х,х]ард", str(choice)):
        hardlvl()
    else:
        print("Введённое сообщение не совпадает ни с одним уровнем сложности.\nПопробуйте ещё раз.")
# технически завершений у программы нет - завершение любого этапа викторины приводит обратно к выбору уровня
# выйти из программы можно только написав ключевое слово
